# 番茄土豆 v9.1 - 功能演示指南

## 🎯 快速体验新功能

### 功能1：历史记录标签前置显示

#### 演示步骤

1. **添加带标签的任务**
   ```
   输入：写代码 #工作 #重要
   按回车添加
   ```

2. **开始并完成番茄钟**
   - 点击"开始番茄钟"
   - 等待完成（或点击停止测试）
   - 输入任务名称并保存

3. **查看显示效果**
   - **今日番茄记录**（右侧卡片）
     ```
     10:00-10:25 #工作 #重要 写代码
     ```
   
   - **番茄历史**（底部标签）
     ```
     2025年12月23日 星期一
     10:00-10:25 #工作 #重要 写代码
     ```
   
   - **任务历史**（完成任务后）
     ```
     ☑ #工作 #重要 写代码 完成1个番茄
     ```

#### 对比效果

**之前的显示**：
```
10:00-10:25 写代码 #工作 #重要
```

**现在的显示**：
```
10:00-10:25 #工作 #重要 写代码
```

**优势**：
- ✅ 标签更醒目，快速识别任务类型
- ✅ 视觉层次更清晰
- ✅ 与任务列表保持一致

---

### 功能2：番茄完成浏览器通知

#### 演示步骤

1. **首次使用 - 授予权限**
   - 打开应用
   - 浏览器会自动弹出通知权限请求
   - 点击"允许"

2. **开始番茄钟**
   ```
   1. 点击"开始番茄钟"
   2. 选择或输入任务名称
   3. 等待番茄完成
   ```

3. **接收通知**
   - 番茄完成时，桌面右下角（或右上角）会弹出通知
   - 通知内容：
     ```
     🍅 番茄钟完成！
     恭喜完成 25 分钟的专注时间：写代码
     ```

4. **通知交互**
   - **点击通知**：自动聚焦到番茄土豆标签页
   - **等待3秒**：通知自动关闭

#### 后台测试

1. **切换标签页测试**
   - 开始番茄钟
   - 切换到其他标签页（如看视频、浏览网页）
   - 等待番茄完成
   - ✅ 仍然会收到通知

2. **最小化浏览器测试**
   - 开始番茄钟
   - 最小化浏览器窗口
   - 使用其他应用
   - 等待番茄完成
   - ✅ 仍然会收到通知

---

## 🎨 视觉效果展示

### 标签前置显示效果

#### 今日番茄记录
```
┌─────────────────────────────────────┐
│ 今日番茄记录                         │
├─────────────────────────────────────┤
│ 10:00-10:25 #工作 #重要 写代码      │
│ 10:30-10:55 #工作 开会              │
│ 11:00-11:25 #学习 #前端 学习React   │
└─────────────────────────────────────┘
```

#### 番茄历史记录
```
┌─────────────────────────────────────────────────┐
│ 番茄历史                    [+ 补打番茄]        │
├─────────────────────────────────────────────────┤
│ 2025年12月23日 星期一 [3个]                     │
│                                                  │
│ 10:00-10:25 #工作 #重要 写代码          [⋮]   │
│ 10:30-10:55 #工作 开会                  [⋮]   │
│ 11:00-11:25 #学习 #前端 学习React       [⋮]   │
└─────────────────────────────────────────────────┘
```

#### 任务历史记录
```
┌─────────────────────────────────────────────────┐
│ 任务历史                                         │
├─────────────────────────────────────────────────┤
│ 2025年12月23日 星期一 [3个]                     │
│                                                  │
│ ☑ #工作 #重要 写代码        完成3个番茄        │
│ ☑ #工作 开会                完成1个番茄        │
│ ☑ #学习 #前端 学习React     完成2个番茄        │
└─────────────────────────────────────────────────┘
```

---

### 浏览器通知效果

#### Windows 通知样式
```
┌─────────────────────────────────────┐
│ 🍅 番茄钟完成！                     │
│                                      │
│ 恭喜完成 25 分钟的专注时间：写代码  │
│                                      │
│ 番茄土豆                    [×]     │
└─────────────────────────────────────┘
```

#### macOS 通知样式
```
┌─────────────────────────────────────┐
│ 番茄土豆                            │
│                                      │
│ 🍅 番茄钟完成！                     │
│ 恭喜完成 25 分钟的专注时间：写代码  │
└─────────────────────────────────────┘
```

---

## 🧪 测试场景

### 场景1：工作日常使用

**背景**：一个普通的工作日，需要完成多个任务

**操作流程**：
1. 早上9:00，添加任务：
   - `写代码 #工作 #重要`
   - `开会 #工作`
   - `写文档 #工作 #文档`

2. 开始第一个番茄钟（写代码）
   - 专注25分钟
   - 收到通知：🍅 番茄钟完成！
   - 保存记录

3. 休息5分钟后，开始第二个番茄钟（开会）
   - 切换到会议软件
   - 25分钟后收到通知
   - 点击通知回到番茄土豆
   - 保存记录

4. 下午查看进度
   - 查看"今日番茄记录"：完成了多少个番茄
   - 查看"番茄历史"：按时间查看详细记录
   - 查看"任务历史"：哪些任务已完成

**预期效果**：
- ✅ 所有记录标签都在前面，一目了然
- ✅ 每个番茄完成都有通知提醒
- ✅ 即使在会议中也能收到通知

---

### 场景2：学习新技能

**背景**：周末学习React，需要专注学习

**操作流程**：
1. 添加学习任务：
   - `学习React基础 #学习 #前端`
   - `做练习项目 #学习 #实践`
   - `写学习笔记 #学习 #笔记`

2. 开始学习番茄钟
   - 看视频教程
   - 25分钟后收到通知
   - 保存记录

3. 继续学习
   - 做练习项目
   - 写笔记
   - 每个番茄都有通知提醒

4. 晚上总结
   - 查看"番茄历史"：今天学了多久
   - 按标签筛选：#学习 相关的所有记录
   - 统计学习成果

**预期效果**：
- ✅ 学习记录清晰，标签醒目
- ✅ 通知帮助保持专注节奏
- ✅ 容易统计学习时间

---

### 场景3：多设备协同

**背景**：在公司和家里都使用番茄土豆

**操作流程**：
1. 公司电脑（上午）
   - 完成3个工作番茄
   - 点击同步按钮上传数据

2. 家里电脑（晚上）
   - 打开应用，自动同步
   - 看到上午的记录（标签前置显示）
   - 继续完成2个学习番茄
   - 收到通知提醒

3. 第二天公司电脑
   - 自动同步
   - 看到昨晚的学习记录
   - 所有记录格式统一

**预期效果**：
- ✅ 数据同步正常
- ✅ 标签显示一致
- ✅ 通知在两台电脑都正常工作

---

## 🎓 使用技巧

### 技巧1：标签命名规范

建议使用以下标签分类：

**工作类**：
- `#工作` - 一般工作任务
- `#重要` - 重要任务
- `#紧急` - 紧急任务
- `#会议` - 会议相关

**学习类**：
- `#学习` - 一般学习
- `#前端` - 前端技术
- `#后端` - 后端技术
- `#算法` - 算法学习

**生活类**：
- `#生活` - 日常生活
- `#健身` - 运动健身
- `#阅读` - 读书阅读

**优势**：
- 标签前置显示时更醒目
- 容易按类型筛选
- 统计分析更清晰

---

### 技巧2：通知管理

**最佳实践**：
1. **工作时间**：开启通知，保持专注节奏
2. **会议时间**：保持通知，但设置勿扰模式
3. **休息时间**：可以关闭通知
4. **深夜学习**：开启通知，避免过度疲劳

**权限管理**：
- Chrome：`chrome://settings/content/notifications`
- Firefox：`about:preferences#privacy`
- Edge：`edge://settings/content/notifications`

---

### 技巧3：历史记录查看

**快速查找**：
1. **按日期查找**
   - 番茄历史：使用日期筛选
   - 任务历史：使用日期筛选

2. **按标签查找**
   - 标签前置显示，快速扫描
   - 使用浏览器搜索（Ctrl+F）搜索标签

3. **按任务查找**
   - 在历史记录中搜索任务名称
   - 查看完成情况

---

## 🔧 故障排除

### 问题1：通知不显示

**解决方案**：
1. 检查浏览器通知权限
2. 检查操作系统通知设置
3. 确认浏览器支持通知
4. 查看控制台错误信息

**快速测试**：
```javascript
// 在控制台执行
new Notification('测试', { body: '如果看到这条通知，说明功能正常' });
```

---

### 问题2：标签显示不正确

**解决方案**：
1. 刷新页面（Ctrl+F5）
2. 清除浏览器缓存
3. 检查任务输入格式
4. 查看控制台错误

**正确格式**：
```
✅ 正确：写代码 #工作 #重要
❌ 错误：写代码 # 工作 # 重要（标签中有空格）
```

---

### 问题3：通知权限被拒绝

**解决方案**：
1. 打开浏览器设置
2. 找到通知权限设置
3. 找到番茄土豆网站
4. 改为"允许"
5. 刷新页面

---

## 📞 获取帮助

遇到问题？
1. 查看 [v9.1 功能更新说明](./V9.1_UPDATE_NOTES.md)
2. 查看 [v9.1 测试指南](./V9.1_TEST_GUIDE.md)
3. 检查浏览器控制台错误
4. 提交Issue到GitHub仓库

---

**版本**: v9.1  
**更新日期**: 2025-12-23  
**开发者**: 番茄土豆团队

🎉 祝您使用愉快！
